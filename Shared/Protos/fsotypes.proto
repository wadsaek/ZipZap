syntax = "proto3";

import "guid.proto";

option csharp_namespace = "ZipZap.Grpc";

enum FileType {
  REGULAR_FILE = 0;
  DIRECTORY = 1;
  SYMLINK = 2;
}

message FileData {
  bytes content = 1;
}

message DirectoryData {
 repeated FsoWithType entries = 1;
}

message SymlinkData {
  string target = 1;
}

message FsoSharedData {
  string name = 1;
  Guid rootId = 2;
  int32 permissions = 3;
  int32 owner = 6;
  int32 group = 7;
}

message FsoWithType {
  Guid id = 1;
  FileType type = 2;
  FsoSharedData data = 3;
  optional SymlinkData symlinkData = 4;
}
